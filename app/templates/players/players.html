{% extends "base.html" %}

{% block title %}Jogadores{% endblock %}

{% block content %}
<h1>Jogadores do Clã</h1>

<!-- Formulário de Busca -->
<form method="POST" action="{{ url_for('players.players') }}">
    {{ form.hidden_tag() }}
    <div class="form-row">
        <div class="form-group col-md-3">
            {{ form.name.label }}
            {{ form.name(class="form-control") }}
        </div>
        <div class="form-group col-md-3">
            {{ form.tag.label }}
            {{ form.tag(class="form-control") }}
        </div>
        <div class="form-group col-md-2">
            {{ form.min_townhall.label }}
            {{ form.min_townhall(class="form-control") }}
        </div>
        <div class="form-group col-md-2">
            {{ form.max_townhall.label }}
            {{ form.max_townhall(class="form-control") }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-3">
            {{ form.min_trophies.label }}
            {{ form.min_trophies(class="form-control") }}
        </div>
        <div class="form-group col-md-3">
             {{ form.max_trophies.label }}
            {{ form.max_trophies(class="form-control") }}
        </div>
        <div class="form-group col-md-3">
            {{ form.sort_by.label }}
            {{ form.sort_by(class="form-control") }}
        </div>
        <div class="form-group col-md-3">
          <label for="submit"></label> <!-- Label invisivel, para alinhar o botão -->
            {{ form.submit(class="form-control btn btn-primary") }}
        </div>
    </div>

</form>

<!-- Tabela de Jogadores -->
<table class="table">
    <thead>
        <tr>
            <th>Tag</th>
            <th>Nome</th>
            <th>Nível CV</th>
            <th>Nível EXP</th>
            <th>Troféus</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for player in players %}
        <tr>
            <td>{{ player.player_tag }}</td>
            <td>{{ player.name }}</td>
            <td>{{ player.townhall_level }}</td>
            <td>{{ player.exp_level }}</td>
            <td>{{ player.trophies }}</td>
             <td>
                <a href="{{ url_for('players.player', player_tag=player.player_tag) }}" class="btn btn-primary btn-sm">Detalhes</a>
            </td>

        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}